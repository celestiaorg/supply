# Token Supply Calculation System

This document outlines the architecture of the token supply calculation system, which is designed to compute both the total and circulating supplies of tokens within a blockchain or similar decentralized network. The system handles various calculations based on time-since-genesis and specific events that influence token availability.

## System Overview

The architecture is divided into two main components:

1. **Total Supply Calculation** - This component calculates the total number of tokens that have been generated, including those from initial issuance and those generated through inflationary mechanisms.
2. **Circulating Supply Calculation** - This component estimates the number of tokens that are actually circulating in the market, accounting for locked tokens and those that have not yet been released into circulation.

## Mermaid Diagram

Below is a Mermaid diagram that illustrates the interactions and functions involved in calculating the total and circulating supplies:

```mermaid
graph TB
    subgraph "Total Supply Calculation"
        style TotalSupply fill:#88c0d0, stroke:#2e3440, stroke-width:2px
        TotalSupply(["**TotalSupply(t)** | Calculates the total supply of tokens at any given time t, including both initial supply and tokens added through inflation."]):::function
        -->|"Input: Days since Genesis"| cumulativeInflation(["**cumulativeInflation(days)** | Accumulates total inflation from day 0 to the current day, providing a snapshot of total tokens generated by inflation."]):::function
        TotalSupply -->|"Input: Time t"| daysSinceGenesis(["**daysSinceGenesis(t)** | Converts the input time 't' into total days elapsed since genesis, critical for timing-based calculations."]):::data
        cumulativeInflation -->|"Input: Days - 1"| dailyInflationForDay(["**dailyInflationForDay(days)** | Determines tokens generated by inflation for any given day, essential for calculating total inflation recursively."]):::function
        dailyInflationForDay -->|"Input: Years since Genesis"| dailyInflationForYear(["**dailyInflationForYear(years)** | Projects daily inflation based on the year, adjusting for annual disinflation rate."]):::function
        dailyInflationForYear -->|"Input: Years since Genesis"| inflationRate(["**inflationRate(years)** | Calculates annual inflation rate, incorporating disinflation to reduce inflation over time."]):::function
        cumulativeInflation -->|"Recursive Call: Days - 1"| cumulativeInflation1(["**Previous Day's Cumulative Inflation**"]):::recursive
        dailyInflationForDay -->|"Recursive Call: Years - 1"| dailyInflationForYear1(["**Previous Year's Daily Inflation**"]):::recursive
        inflationRate -->|"Recursive Call: Years - 1"| inflationRate1(["**Previous Year's Inflation Rate**"]):::recursive
        TotalSupply -->|"Static Value"| initialTotalSupply(["**Initial Total Supply** | Predefined initial amount of tokens set at the network's genesis."]):::static
    end

    subgraph "Circulating Supply Calculation"
        style CirculatingSupply fill:#ebcb8b, stroke:#2e3440, stroke-width:2px
        CirculatingSupply(["**CirculatingSupply(t)** | Calculates the amount of tokens currently available in the market, differentiating between locked and unlocked tokens based on predefined rules."]):::function
        -->|"Input: Time t"| publicAllocationCirculating(["**Public Allocation Circulating(t)** | Calculates tokens from public allocation currently in circulation, considering lock-up periods and releases."]):::function
        CirculatingSupply -->|"Input: Time t"| ecosystemCirculating(["**Ecosystem Circulating(t)** | Tracks tokens allocated for ecosystem development, gradually releasing them based on milestones."]):::function
        CirculatingSupply -->|"Input: Time t"| investorsCirculating(["**Investors Circulating(t)** | Determines number of investor tokens unlocked over time, following specific vesting schedules."]):::function
        CirculatingSupply -->|"Input: Time t"| coreContributorsCirculating(["**Core Contributors Circulating(t)** | Monitors tokens allocated to core contributors, releasing them according to vesting terms."]):::function
        CirculatingSupply -->|"Input: Days since Genesis"| cumulativeInflation2(["**Cumulative Inflation to Current Day** | Reflects total amount of tokens added to supply due to inflation up to present day."]):::recursive
        ecosystemCirculating -->|"Input: Days since Genesis"| daysSinceGenesis1(["**Days Calculation for Ecosystem** | Helps determine specific release schedules for ecosystem tokens based on days elapsed since genesis."]):::data
        investorsCirculating -->|"Input: Days since Genesis"| daysSinceGenesis1
        coreContributorsCirculating -->|"Input: Days since Genesis"| daysSinceGenesis1
        ecosystemCirculating -->|"Event: One Year Mark"| oneYearAfterTGE(["**One Year After TGE** | Marks initial major release of ecosystem tokens."]):::event
        ecosystemCirculating -->|"Event: Four Year Mark"| fourYearsAfterTGE(["**Four Years After TGE** | Concludes release schedule for ecosystem tokens, fully integrating them into circulation."]):::event
        investorsCirculating -->|"Event: Two Year Mark"| twoYearsAfterTGE(["**Two Years After TGE** | Completes investor token vesting schedule, fully unlocking all investor tokens."]):::event
        coreContributorsCirculating -->|"Event: Three Year Mark"| threeYearsAfterTGE(["**Three Years After TGE** | Finalizes release of all core contributor tokens, aligning with end of vesting period."]):::event
        publicAllocationCirculating -->|"Event: TGE Date"| TGE(["**Token Generation Event** | Starting point for public token allocation and beginning of token circulation."]):::event
    end

    classDef function fill:#88c0d0,stroke:#2e3440,stroke-width:2px;
    classDef data fill:#b48ead,stroke:#2e3440,stroke-width:2px;
    classDef recursive fill:#b48ead,stroke:#2e3440,stroke-width:2px;
    classDef static fill:#b48ead,stroke:#2e3440,stroke-width:2px;
    classDef event fill:#ebcb8b,stroke:#2e3440,stroke-width:2px;
